# Redis 기본 설정 파일
# /home/yielding/code/redis/redis.conf

################################## 네트워크 ##################################

# 바인딩 주소 (로컬만 허용)
bind 127.0.0.1

# 포트 (기본값: 6379)
port 6379

# TCP 백로그
tcp-backlog 511

# 클라이언트 타임아웃 (0 = 비활성화)
timeout 0

# TCP keepalive
tcp-keepalive 300

################################## 일반 설정 ##################################

# 데몬 모드로 실행 (백그라운드)
daemonize no

# PID 파일 위치
pidfile /home/yielding/code/redis/redis.pid

# 로그 레벨 (debug, verbose, notice, warning)
loglevel notice

# 로그 파일 (빈 문자열 = stdout)
logfile "/home/yielding/code/redis/redis.log"

# 데이터베이스 개수
databases 16

################################## 스냅샷 (RDB) ##################################

# RDB 저장 조건: save <seconds> <changes>
# 900초(15분) 동안 1개 이상 변경시
save 900 1
# 300초(5분) 동안 10개 이상 변경시
save 300 10
# 60초(1분) 동안 10000개 이상 변경시
save 60 10000

# RDB 저장 실패시 쓰기 거부
stop-writes-on-bgsave-error yes

# RDB 압축
rdbcompression yes

# RDB 체크섬
rdbchecksum yes

# RDB 파일명
dbfilename dump.rdb

# 작업 디렉토리
dir /home/yielding/code/redis/data

################################## AOF (Append Only File) ##################################

# AOF 활성화
appendonly no

# AOF 파일명
appendfilename "appendonly.aof"

# AOF fsync 정책 (always, everysec, no)
appendfsync everysec

################################## 메모리 관리 ##################################

# 최대 메모리 (예: 256mb, 1gb)
maxmemory 256mb

# 메모리 초과시 정책
# volatile-lru: 만료 키 중 LRU 삭제
# allkeys-lru: 모든 키 중 LRU 삭제
# volatile-random: 만료 키 중 랜덤 삭제
# allkeys-random: 모든 키 중 랜덤 삭제
# volatile-ttl: 만료 시간이 짧은 키 삭제
# noeviction: 삭제 안함 (쓰기 거부)
maxmemory-policy noeviction

################################## 보안 ##################################

# 비밀번호 설정 (선택사항 - 로컬 개발용이므로 비활성화)
# requirepass yourpassword

# 위험한 명령어 비활성화/이름 변경 (선택사항)
# rename-command FLUSHDB ""
# rename-command FLUSHALL ""
# rename-command DEBUG ""

################################## 클라이언트 ##################################

# 최대 클라이언트 수
maxclients 10000

################################## 느린 쿼리 로그 ##################################

# 느린 쿼리 기준 (마이크로초, 10000 = 10ms)
slowlog-log-slower-than 10000

# 느린 쿼리 로그 최대 개수
slowlog-max-len 128
